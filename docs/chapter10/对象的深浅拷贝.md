# 对象的深浅拷贝

对象拷贝分为浅拷贝(shallow)和深拷贝(deep)两种。浅拷贝只复制一层对象的属性，并不会进行递归复制，而javascript存储对象都是存地址的，所以浅拷贝会导致对象中的子对象指向同一块内存地址；而深拷贝则不同，它不仅将原对象的各个属性逐个复制出去，而且将原对象各个属性所包含的对象也依次采用深拷贝的方法递归复制到新对象上，拷贝了所有层级。

## 浅拷贝

一般指的是把对象的第一层拷贝到一个新对象上去

~~~javascript
var a = { count: 1, deep: { count: 2 } }
var b = Object.assign({}, a)
// 或者
var b = {...a}

~~~



## 深拷贝

一般需要借助递归实现，如果对象的值还是个对象，要进一步的深入拷贝，完全替换掉每一个复杂类型的引用。

~~~javascript
const deepCopy = (obj) => {
    let ret = {}
    for (let key in obj) {
        let val = obj[key]
        ret[key] = typeof === 'object' ? deepCopy(val) : val
    }
    return ret
}
~~~



对于同一个用例来说

~~~javascript
// 浅拷贝
var a = { count: 1, deep: { count: 2 } }
var b = {...a}

a.deep.count = 5
b.deep.count // 5

~~~

~~~javascript
var a = { count: 1, deep: { count: 2 } }
var b = deepCopy(a)
a.deep.count = 5
b.deep.count // 2

~~~

